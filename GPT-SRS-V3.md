# GPT-SRS-V3 – 안전의 길 (MVP용 SRS)

## 1. 문서 개요

### 1.1 목적

이 문서는 **안전의 길** 안전관리 웹 서비스의  
**MVP(System Requirements Specification, SRS)** 를 정의한다.

- 법정 자율점검표(사다리·고소작업대·밀폐공간)를 기반으로 한 **체크리스트 전산화**
- 현장 작업자의 체크리스트 제출 → 감독자·안전관리자의 검토/조치 워크플로우
- 작업 사진 기반 **AI 위험도 분석 및 위험현황 모니터링**

### 1.2 범위 (MVP)

- 플랫폼: Web 기반 (모바일 브라우저 + PC 브라우저)
- 사용자:
  - 기술인(작업자)
  - 관리감독자
  - 안전관리자
- 1차 릴리즈(MVP)는 **삼성/진성이엔지 내부 사용**을 전제로 한다.
- 포함 기능:
  - 사다리 / 고소작업대 / 밀폐공간 작업 전 체크리스트 작성·제출
  - 감독자 승인/반려 및 간단한 조치 요청
  - 안전관리자의 위험현황 조회 및 조치 기록(텍스트 + 사진)
  - 업로드 사진에 대한 기본 AI 위험도 분석 (정확도 목표 80% 수준)
  - 기본 수준의 웹 인앱 알림(“내 할 일” 중심)

### 1.3 용어 정의

- **작업유형(Work Type)**: 사다리, 고소작업대, 밀폐공간
- **체크리스트 템플릿(Template)**: 법정 양식을 기반으로 사전에 등록된 항목 묶음
- **체크리스트 인스턴스(Instance)**: 특정 작업에 대해 실제로 작성된 1회분 체크리스트
- **조치 기록(Action Record)**: 감독자/안전관리자가 남기는 텍스트 + 사진 기반 시정조치 내역
- **AI 분석 결과**: 사진에 대한 위험도 진단(안전/주의/위험 + 태그)
- **역할(Role)**: 기술인, 관리감독자, 안전관리자

### 1.4 비즈니스 배경 및 문제 정의 (AOS-DOS 요약)

본 서비스는 `AOS-DOS` 분석을 통해 도출한 **핵심 Pain·Goal**을 기반으로 MVP 범위와 우선순위를 정의한다.

- **핵심 페르소나 예시**
  - 박소장: 서류·교육 관리 책임자
  - 김대리: 점검·리포트 실무 담당자
  - 이팀장: 리스크·안전관리 책임자
  - (그 외) 정과장, 최매니저, 압둘, 김기사 등은 2단계 확장 범위 중심
- **Pain–Goal 구조(요약)**
  - 서류·교육 관리가 수기/분산되어 누락·중복이 발생 → **문서·체크리스트 자동화 및 표준화** 필요
  - 법령·보고 체계가 복잡하여 리포트 작성 피로가 극심 → **보고서·일정관리 자동화** 필요
  - 실시간 리스크 데이터 부재 및 법적 책임 부담 → **리스크 현황 대시보드 및 조치 추적** 필요

본 문서에서는 AOS(Importance/만족도 기반)·DOS(시장가중치 반영) 분석 결과를 다음과 같은 **Pain ID 메타데이터**로 참조한다.

- `P-01 김대리 – 법령·보고 혼잡 (AOS 3.0 / DOS 2.7, Q1 혁신기회)`
- `P-02 박소장 – 서류·교육 관리 복잡 (AOS 3.0 / DOS 2.4, Q1 혁신기회)`
- `P-03 이팀장 – 법적 리스크 부담 (AOS 2.0 / DOS 1.6, Q2 개선기회)`
- `P-04~P-07` (정과장·최매니저·압둘·김기사 등, Q3 유지/확장 영역)

> 기능 정의 및 범위·우선순위 표기 시, 필요에 따라 위 Pain ID 및 AOS-DOS Quadrant(Q1~Q3)를 함께 명시한다.

---

## 2. 시스템 개요

### 2.1 사용자 역할 및 권한(요약)

| 역할          | 주요 권한                                                  | 제한 사항                                           |
|---------------|------------------------------------------------------------|-----------------------------------------------------|
| 기술인        | 체크리스트 작성/임시저장/제출, 사진 업로드, 본인 이력 조회 | 타 사용자 기록 수정/삭제 불가                      |
| 관리감독자    | 체크리스트 검토/승인/반려, 조치 요청/일부 조치 기록       | 템플릿·시스템 설정 불가                             |
| 안전관리자    | 전체 현장 기록 조회, 위험현황 모니터링, 조치 기록/완료 처리 | 사용자 계정 관리/시스템 설정은 최소 권한 원칙 준수 |

> 상세 권한 매트릭스와 상태 전이는 **5장 상태 모델 & 권한 매트릭스**에서 정의한다.

### 2.2 주요 사용 시나리오

1. **기술인 – 작업 전 체크리스트 작성**
   - 모바일 브라우저에서 로그인
   - 작업유형(사다리/고소작업대/밀폐공간) 선택
   - 자동 로딩된 체크리스트 항목을 “네/아니요”로 응답
   - 필요 시 사진(작업 전/작업 환경) 업로드
   - 임시저장 또는 제출

2. **관리감독자 – 체크리스트 검토 및 승인/반려**
   - “검토할 체크리스트” 목록에서 개별 건 상세 조회
   - 위험 항목(‘아니요’) 요약 확인
   - 승인 또는 반려(반려 사유 작성)
   - 기술인에게 결과 알림 표시

3. **안전관리자 – 위험현황 모니터링 및 조치 기록**
   - 날짜/현장/작업유형/위험도 조건으로 필터링된 리스트 조회
   - ‘아니요’가 포함된 건, AI 위험도=“위험”인 건을 우선 확인
   - 현장 방문 또는 원격 점검 후 조치 내용(텍스트 + 사진) 기록
   - 조치 상태를 진행중/완료로 변경

4. **AI 위험분석**
   - 사진 업로드 시, AI 분석 모듈에 동기 REST 호출
   - 위험도(안전/주의/위험) 및 태그를 받아 체크리스트 인스턴스에 연결
   - 위험도=“위험”인 경우, 위험현황 화면에서 상위 노출

5. **기본 알림/할 일**
   - 기술인: 본인이 제출한 체크리스트의 승인/반려 결과 확인
   - 관리감독자: 새로 제출된 체크리스트를 “검토 필요” 리스트에서 확인
   - 안전관리자: 위험도 높은 건이 “우선 확인 필요” 리스트로 노출

### 2.3 페르소나 및 Pain–시나리오 매핑 (AOS-DOS 연계)

아래 표는 AOS-DOS 분석에서 도출된 핵심 페르소나·Pain이 본 시스템의 주요 사용 시나리오와 어떻게 연결되는지를 요약한다.

| 페르소나 | Pain ID / 핵심 Pain                      | 관련 시나리오                                   | 설명 |
|---------|-------------------------------------------|-------------------------------------------------|------|
| 김대리  | `P-01` 법령·보고 혼잡                     | 1. 기술인 체크리스트 작성, 5. 기본 알림/할 일  | 반복적인 수기 입력·보고 업무를 체크리스트 전산화와 “내 할 일” 기반 승인/반려 피드백으로 경감 |
| 박소장  | `P-02` 서류·교육 관리 복잡                | 1. 기술인 체크리스트 작성, 2. 감독자 승인/반려 | 법정 자율점검표·교육 이행 내역을 표준 템플릿·전자 승인 흐름으로 관리하여 누락·중복을 감소 |
| 이팀장  | `P-03` 법적 리스크 부담, 리스크 가시성 부족 | 3. 위험현황 모니터링 및 조치 기록, 4. AI 위험분석 | AI 위험도 + ‘아니요’ 응답 기반으로 고위험 작업을 상위 노출하고, 조치 이력을 추적함으로써 예방 중심 관리 지원 |

※ 나머지 페르소나(P-04~P-07)는 데이터 통합·ESG·UX·다국어 등 **2단계 확장 기능**과 밀접하며, 본 MVP에서는 직접적인 기능 구현보다 설계 시 참고 수준으로 활용한다.

---

## 3. 기능 요구사항 (Functional Requirements)

각 기능은 가능한 한 **입력(Input) – 처리(Process) – 출력(Output)**,  
및 **성공/실패 기준, 성능 기준**을 포함해 정의한다.

### 3.1 F-01 사용자 인증 및 권한 관리

**목적**: 사용자별 권한에 따라 화면과 기능 접근을 제한한다.

- **Actor**: 기술인, 관리감독자, 안전관리자
- **사전조건**: 시스템에 사용자 계정/역할이 등록되어 있음

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: High  
- **관련 Pain ID(AOS)**: 직접적인 Pain 연결은 아니나, 모든 AOS-DOS Pain을 안전하게 관리하기 위한 **플랫폼 공통 보안·거버넌스 전제 조건**
- **관련 Quadrant(AOS-DOS)**: 전 Quadrant 공통 인프라 (Q1~Q3의 기능이 의미를 가지기 위한 필수 계층)

#### 요구사항

1. 시스템은 사용자가 **아이디/비밀번호로 로그인**할 수 있어야 한다.
2. 로그인 시, 사용자에게 하나 이상의 **역할(Role)** 이 매핑되며, 역할에 따라 접근 가능한 메뉴/기능을 제한한다.
3. 로그인 실패가 **연속 5회 이상** 발생하면, 계정은 **5분간 로그인 제한** 상태가 된다.
4. 사용자는 언제든지 **로그아웃**할 수 있어야 한다.
5. 인증은 **JWT 기반 토큰**으로 처리하며, 모든 보호된 API는 유효한 토큰을 필요로 한다.
6. 비밀번호는 **최소 길이(예: 8자 이상)**와 기본 복잡도(대/소문자, 숫자 중 2종 이상)를 적용한다. (정확한 정책은 운영 정책 문서에 위임)
7. 주요 보안 이벤트(로그인 성공/실패, 계정 잠금/해제)는 감사 로그에 기록한다.

---

### 3.2 F-02 작업유형 선택 및 체크리스트 템플릿 로딩

**목적**: 사다리 / 고소작업대 / 밀폐공간 작업에 맞는 체크리스트를 자동 제공한다.

- **Actor**: 기술인

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: High  
- **관련 Pain ID(AOS)**: `P-01 김대리 – 법령·보고 혼잡`, `P-02 박소장 – 서류·교육 관리 복잡`
- **관련 Quadrant(AOS-DOS)**: Q1 혁신기회 – 리포트·문서 자동화의 기초가 되는 템플릿 로딩 기능

#### 입력

- 작업유형(`work_type`): {사다리, 고소작업대, 밀폐공간}
- 작업일자, 현장명, 공정명(선택), 협력사명(선택)

#### 처리

1. 선택된 **작업유형**에 따라 해당 템플릿을 DB에서 조회한다.
   - 사다리: 자율점검표 2-1-3 항목
   - 고소작업대: 2-2-2 항목
   - 밀폐공간: 2-3-5 항목
2. 템플릿 항목 리스트를 화면에 표시한다.
3. 템플릿 버전이 변경되더라도 기존 인스턴스는 **당시 버전 스냅샷**을 유지한다.

#### 출력

- 체크 항목 리스트:
  - 항목 텍스트
  - 응답 버튼(네/아니요)
  - 비고 입력란(선택)

#### 성능 기준

- 템플릿 로딩 시간: **1초 이내**

---

### 3.3 F-03 체크리스트 작성 및 제출

**목적**: 작업 전 자가진단 내용을 전산화하여 추후 검토·추적이 가능하도록 저장한다.

- **Actor**: 기술인

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: High  
- **관련 Pain ID(AOS)**: `P-01 김대리 – 법령·보고 혼잡`, `P-02 박소장 – 서류·교육 관리 복잡`
- **관련 Quadrant(AOS-DOS)**: Q1 혁신기회 – 현장 문서·보고의 핵심 Pain을 직접적으로 다루는 MVP 핵심 기능

#### 입력

- 각 항목에 대한 응답: {네, 아니요}
- 비고(선택 텍스트)
- 작업사진(0~N장, **MVP에서는 체크리스트 전체 공통 사진 기준**)
  - (향후 확장: 항목별 사진 연결 옵션)

#### 처리

1. 모든 **필수 항목(`required = true`)** 에 대한 응답을 검증한다.
2. 하나 이상 응답이 ‘아니요’인 항목의 `risk_flag`를 `true`로 설정한다.
3. 사진 업로드 시:
   - 파일 형식: JPG/PNG 화이트리스트
   - 개별 파일 용량: 10MB 이하
   - 파일명/경로를 안전한 형태로 변환하여 저장(S3 등 오브젝트 스토리지).
4. “임시저장” 선택 시 상태 = `draft`, “제출” 선택 시 상태 = `submitted` 로 설정한다.

#### 출력

- 성공 시:
  - “체크리스트가 임시저장되었습니다.” 또는
  - “체크리스트가 제출되었습니다.” 메시지
- 실패 시:
  - 누락된 필수 응답, 허용되지 않은 파일 형식/용량 등 구체 오류 메시지

#### 성능 기준

- 임시저장/제출 요청 후 서버 응답: **3초 이내**
- 클라이언트 유효성 검사 오류 표시: **0.5초 이내**

---

### 3.4 F-04 감독자 검토 및 승인/반려

**목적**: 작업자가 제출한 체크리스트를 검토하고 승인 또는 재요청한다.

- **Actor**: 관리감독자

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: High  
- **관련 Pain ID(AOS)**: `P-02 박소장 – 서류·교육 관리 복잡`, `P-03 이팀장 – 법적 리스크 부담`
- **관련 Quadrant(AOS-DOS)**: Q1·Q2 – 체크리스트·조치 흐름을 통해 법적 리스크를 줄이고 책임 있는 승인 과정을 보장

#### 입력

- 검토 대상 체크리스트 ID
- 승인 여부: {승인, 반려}
- 반려 사유 텍스트(반려 시 필수)

#### 처리

1. 상태가 `submitted` 인 체크리스트만 검토 가능하다.
2. ‘아니요’ 응답이 있는 항목은 상단 Summary 영역에 우선 노출한다.
3. 관리감독자는 다음 중 하나를 선택한다.
   - 승인: 상태 = `approved_supervisor`
   - 반려: 상태 = `rejected_supervisor` + 반려사유 저장
4. 승인/반려 결과는 기술인의 “체크리스트 이력”에서 확인 가능해야 한다.
5. 승인/반려 이벤트는 알림(또는 “내 할 일” 리스트)의 상태 갱신을 트리거한다.

#### 출력

- 감독자 화면:
  - 승인/반려 결과 및 타임스탬프
- 기술인 화면:
  - 승인/반려 결과 및 반려사유(반려 시)

#### 성능 기준

- 체크리스트 상세 로딩: **2초 이내**
- 승인/반려 처리: **3초 이내**

---

### 3.5 F-05 안전관리자 위험현황 조회 및 조치 기록

**목적**: 위험도가 높은 작업을 우선 모니터링하고, 조치 내용을 텍스트 + 사진으로 기록한다.

- **Actor**: 안전관리자 (옵션: 감독자도 일부 조치 기록 가능)

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: Medium  
- **관련 Pain ID(AOS)**: `P-03 이팀장 – 법적 리스크 부담`
- **관련 Quadrant(AOS-DOS)**: Q2 개선기회 – 리스크 대시보드·조치 추적을 통해 관리층의 법적·운영상 리스크를 완화

#### 입력

- 필터 조건:
  - 날짜(기간)
  - 현장
  - 작업유형
  - 위험도:
    - ‘아니요’ 응답 포함 여부
    - AI 위험도(안전/주의/위험)
- 선택된 체크리스트 ID
- 조치 내용 텍스트
- 조치 사진(0~N장, 각 10MB 이하)

#### 처리

1. ‘아니요’가 하나 이상인 체크리스트를 기본 상위에 정렬하여 표시한다.
2. AI 분석 결과가 “위험”인 사진이 포함된 건은 **추가 가중치**를 두어 상위 노출한다.
3. 안전관리자가 조치 내용을 입력하고 사진을 업로드하면:
   - `ActionRecord` 엔티티에 저장한다.
   - 체크리스트의 `action_status`를 `in_progress` 또는 `completed` 로 변경한다.
4. 조치 완료 설정 시:
   - 완료일자
   - 담당자 정보
   - 최종 코멘트(선택)를 기록한다.

#### 출력

- 조치 이력 타임라인(텍스트 + 사진)
- 조치 상태(미조치 / 진행중 / 완료)

#### 성능 기준

- 위험현황 리스트 로딩: **3초 이내**
- 조치 내용 저장: **3초 이내**

---

### 3.6 F-06 AI 작업사진 위험분석

**목적**: 업로드된 작업사진에 대해 자동으로 위험도를 판정하고 체크리스트와 연동한다.

- **Actor**: 기술인(사진 업로드), 시스템/AI 모듈

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: Medium  
- **관련 Pain ID(AOS)**: `P-03 이팀장 – 법적 리스크 부담`, (확장) `P-04~P-07` – 데이터·ESG·예측 분석 관련 Pain
- **관련 Quadrant(AOS-DOS)**: Q2·Q3 – 기본 AI 기반 위험 분석으로 리스크 가시성을 높이고, 향후 고급 분석·ESG 리포트 확장의 기반을 제공

#### 입력

- 작업사진 파일(JPG/PNG, 10MB 이하)
- 선택적 메타 정보(작업유형, 작업명 등)

#### 처리

1. 사진 업로드 완료 후, AI 분석 API를 **동기 REST 호출**로 1회 수행한다.
2. AI 분석 결과:
   - 위험도: {안전, 주의, 위험}
   - 태그 예: {“보호구 미착용”, “사다리 미고정”, “난간 없음”, …}
3. 분석 결과를 해당 체크리스트 인스턴스 및 사진과 연결 저장한다.
4. 위험도 = “위험”인 경우 `risk_flag_ai`를 `true`로 설정한다.
5. 분석 실패 또는 타임아웃 시:
   - 체크리스트 저장 자체는 진행
   - 해당 사진은 `ai_status = failed` 로 기록
   - 화면에는 “AI 분석 실패, 수동 검토 필요” 라는 표시를 제공한다.

#### 출력

- 기술인/감독자/안전관리자 화면:
  - 사진 옆에 위험도 배지 표시(색상 또는 아이콘)
  - 위험 태그 목록 표시(간단 텍스트 리스트)

#### 성능 기준

- 사진 1장당 분석 시간: **5초 이내**
- 실패 시:
  - “AI 분석 실패, 수동 검토 필요” 메시지 및 로그 기록

---

### 3.7 F-07 알림 및 “내 할 일” (기본 버전)

**목적**: 체크리스트 승인·반려·조치 필요 상황을 사용자에게 전달한다.

- **Actor**: 시스템

#### 우선순위 및 AOS-DOS 근거

- **우선순위(Priority)**: High  
- **관련 Pain ID(AOS)**: `P-01 김대리 – 법령·보고 혼잡`, `P-02 박소장 – 서류·교육 관리 복잡`, `P-03 이팀장 – 법적 리스크 부담`
- **관련 Quadrant(AOS-DOS)**: Q1·Q2 – “내 할 일”·우선 확인 리스트를 통해 핵심 Pain에 대한 행동 유도를 강화

#### 케이스

1. 기술인 체크리스트 제출 → **관리감독자 “검토할 체크리스트” 목록**에 신규 건 표시
2. 감독자 승인/반려 → **기술인 “체크리스트 이력” 화면**에서 상태 및 반려사유 표시
3. 위험도 높은 건(예: AI=위험, ‘아니요’ 다수) → **안전관리자 “우선 확인” 리스트**에 표시

#### 구현 범위 (MVP)

- 별도의 복잡한 알림 센터/푸시보다는:
  - 각 역할별 홈 화면에 **“내 할 일” / “우선 확인 필요” 리스트** 형태로 표시
  - 읽음/미읽음 상태는 2차 범위로 두고, **상태 기반 리스트 필터**로 대체

---

## 4. 데이터 요구사항 (고수준 데이터 모델)

### 4.1 핵심 엔티티

- `User`  
  - `id`, `username`, `name`, `role`(다중 가능), 팀/현장 정보 등
- `WorkType`  
  - `id`, `name` (사다리/고소작업대/밀폐공간)
- `ChecklistTemplate`  
  - `id`, `work_type_id`, `title`, `version`
- `ChecklistItemTemplate`  
  - `id`, `template_id`, `item_code`, `text`, `required`, `order`
  - `item_code` 예: “2-1-3-1, 2-2-2-1, 2-3-5-1 …”
- `ChecklistInstance`  
  - `id`, `template_id`, `work_date`, `site`, `process`(공정, 선택), `partner`(협력사, 선택)
  - `status` (상태 값은 5장 참조)
  - `created_by`, `approved_by`, `rejected_by`, `rejected_reason`
  - `action_status`, `created_at`, `updated_at`
- `ChecklistItemResponse`  
  - `id`, `instance_id`, `item_template_id`, `answer`(yes/no), `comment`, `risk_flag`
- `Photo`  
  - `id`, `instance_id`, `url/path`, `uploaded_by`, `created_at`
  - `ai_status` (success/failed/pending 등)
- `AIAnalysisResult`  
  - `id`, `photo_id`, `risk_level`, `tags`, `analyzed_at`
- `ActionRecord`  
  - `id`, `instance_id`, `created_by`, `text`, `created_at`
  - `status` (in_progress/completed)
- `ActionPhoto`  
  - `id`, `action_record_id`, `url/path`
- `Notification` (또는 “할 일” 메타데이터 – MVP에선 최소화)
  - `id`, `user_id`, `type`, `target_id`, `title`, `created_at`
- `AuditLog`
  - `id`, `actor_id`, `action`, `target_type`, `target_id`, `changes`, `ip`, `user_agent`, `created_at`

---

## 5. 상태 모델 & 권한 매트릭스

### 5.1 체크리스트 상태 값

- `draft`: 기술인이 작성 중, 미제출 상태
- `submitted`: 기술인이 제출 완료, 감독자 검토 대기
- `approved_supervisor`: 감독자가 승인 완료
- `rejected_supervisor`: 감독자가 반려, 기술인 수정 필요

**허용 전이**

- `null` → `draft` (새로 작성)
- `draft` → `submitted`
- `submitted` → `approved_supervisor`
- `submitted` → `rejected_supervisor`
- `rejected_supervisor` → `draft` (기술인 재작성/재제출)

### 5.2 조치 상태(Action Status)

- `none` (미조치)
- `in_progress` (조치 진행중)
- `completed` (조치 완료)

**허용 전이**

- `none` → `in_progress`
- `in_progress` → `completed`

### 5.3 역할별 권한 매트릭스(요약)

| 기능/엔티티                      | 기술인                 | 관리감독자                            | 안전관리자                                  |
|----------------------------------|------------------------|----------------------------------------|----------------------------------------------|
| 체크리스트 작성/임시저장        | 생성/수정 가능        | 불가                                   | 불가                                         |
| 체크리스트 제출                 | 본인 것만 가능        | 불가                                   | 불가                                         |
| 체크리스트 수정 (`draft`)      | 본인 것만 가능        | 불가                                   | 불가                                         |
| 체크리스트 검토(상세 보기)      | 본인 것만 조회        | 담당 범위 조회                         | 전체 조회 가능                               |
| 승인/반려(상태 변경)           | 불가                   | `submitted` → 승인/반려               | 정책에 따라 일부 허용(기본은 조회 중심)     |
| 조치 기록(ActionRecord) 작성    | 불가(옵션: 제한 허용) | 일부 조치 기록 옵션                    | 전체 조치 기록/수정 가능                     |
| 조치 상태 변경                  | 불가                   | `none` → `in_progress` (옵션)         | `none`/`in_progress` → `completed`           |
| AI 분석 결과 조회               | 본인 체크리스트만     | 담당 체크리스트                        | 전체                                          |
| AuditLog 조회                   | 불가                   | 불가                                   | 관리자(별도 관리자 역할)만 접근             |

※ 실제 조직 정책에 따라 감독자/안전관리자 권한 범위는 상세 조정 가능.

---

## 6. 외부/내부 인터페이스 요구사항

### 6.1 웹 클라이언트

- Chrome 기준 최적화, 모바일/PC 모두 지원
- 반응형 레이아웃(모바일 우선)
- 지원 브라우저 범위는 운영정책 문서에 명시 (예: Chrome 최신 2버전, Edge 최신 2버전)

### 6.2 백엔드 API (REST + OpenAPI 3.x)

- 모든 서비스 간 통신은 **REST(JSON)** 기반
- 주요 엔드포인트 예시 (발췌):
  - `POST /api/auth/login`
  - `GET  /api/templates?work_type=ladder`
  - `POST /api/checklists`
  - `GET  /api/checklists?date=&site=&work_type=&risk=&page=&size=`
  - `GET  /api/checklists/{id}`
  - `POST /api/checklists/{id}/submit`
  - `POST /api/checklists/{id}/approve`
  - `POST /api/checklists/{id}/reject`
  - `POST /api/photos` (multipart, 업로드 후 URL/ID 반환)
  - `POST /api/ai/analyze-photo`
  - `POST /api/checklists/{id}/actions`
  - `PATCH /api/checklists/{id}/actions/{actionId}` (status 변경)
- 에러 응답 형식은 공통 규격(JSON, `code`, `message`, `details`)을 사용한다.

### 6.3 AI 분석 모듈

- REST API 형태:
  - `POST /ai/analyze-photo`
- 요청:
  - multipart/form-data 또는 사내 스토리지 URL
  - 작업유형, 선택적 메타 정보
- 응답:
  - `risk_level` (safe/warn/danger)
  - `tags` (string 리스트)
  - `request_id` (트레이싱용)

---

## 7. 비기능 요구사항 (NFR)

### 7.1 성능

- 동시 사용자 50명 기준으로 정상 동작
- 체크리스트 조회/저장 관련 API 평균 응답시간: **1~3초 이내**
- AI 분석 요청당 응답시간: **5초 이내**

### 7.2 보안

- 로그인 필요, 역할 기반 접근 제어(RBAC)
- 모든 API는 인증 토큰(JWT)을 필수로 요구
- 파일 업로드:
  - 허용 확장자 화이트리스트(JPG/PNG)
  - 기본 수준의 악성 파일 방지(확장자/헤더 검증)
- CSRF/XSS/SQL Injection 방지:
  - 프레임워크(Spring Security 등) 기본 방어 기능 활용
- 민감 정보(비밀번호)는 해시(Salt+적절한 해시 알고리즘)로 저장

### 7.3 가용성 및 로그

- 시스템 장애 시 에러 로그를 남기고, 관리자 페이지(또는 별도 모니터링 도구)에서 조회 가능
- 주요 이벤트(로그인, 체크리스트 제출, 승인/반려, 조치 등록)는 **감사 로그**로 남긴다.
- 로그 보존 기간은 운영 정책에 따라 설정(예: 1년)

### 7.4 파일 보관 정책

- 사진 파일은 사내 보안 정책에 따른 저장소(S3 등)에 저장
- 보존 기간 및 삭제 정책은 별도 보안/컴플라이언스 정책에 따른다.

---

## 8. 기술 스택 및 인프라 제약

### 8.1 기술 스택 (Tech Constraints)

- **C-TEC-001**: 모든 프론트엔드 서비스는 **Vite 기반 React.js**를 사용한다.
- **C-TEC-002**: 모든 백엔드 코어 서비스는 **Java 17 + Spring Boot 3.x (JVM 기반)**을 사용한다.
- **C-TEC-003**: 데이터베이스는 **MySQL(InnoDB, utf8mb4, 버전 8.x 이상)** 을 사용한다.
- **C-TEC-004**: 문서 자동생성 및 LLM 오케스트레이션 엔진은 **Python + FastAPI + LangChain** 기반 별도 서비스로 구현한다.
  - MVP에서는 스켈레톤 수준 또는 제한된 유즈케이스(예: 간단한 리포트 요약)에만 사용 가능하다.
- **C-TEC-005**: LLM 호출은 **사내 LLM Gateway**를 통해 이루어지며, 기본 Provider는 **Google Gemini**이고, 필요 시 OpenAI 등으로 교체 가능하도록 추상화한다.
- **C-TEC-006**: 서비스 간 통신은 **REST(OpenAPI 3.x)** 를 기본으로 하며, gRPC는 향후 고성능 내부 통신이 필요한 MSA 서비스에서 선택적으로 사용할 수 있다.  
  - **MVP 단계에서는 REST만 사용**을 기본으로 한다.

### 8.2 인프라

- 클라우드 인프라는 **AWS** 기반으로 구성한다.
  - 애플리케이션: EC2/ECS/Fargate 중 택일
  - 데이터베이스: Amazon RDS for MySQL
  - 파일 스토리지: Amazon S3
- LLM/AI:
  - LLM: Google Gemini (사내 LLM Gateway 통해 호출)
  - 이미지 위험도 분석은 LLM 기반 또는 별도 Vision API 중 선택하며, 인터페이스는 REST로 추상화한다.

---

## 9. 범위 및 제외 (Scope & Out of Scope)

### 9.1 이번 릴리즈 포함 (MVP)

- 사다리/고소작업대/밀폐공간 체크리스트
- 체크리스트 작성/임시저장/제출 및 승인/반려
- 감독자 및 안전관리자 워크플로우
- 텍스트 + 사진 기반 조치 기록
- 기본 AI 위험도 분석(정확도 80% 수준 목표)
- 간단한 “내 할 일”/우선 확인 리스트 중심의 알림 UX
- 기본 수준의 감사 로그 기록

#### AOS-DOS 관점에서의 포함 근거

- **사다리/고소작업대/밀폐공간 체크리스트**
  - 관련 Pain/AOS: `P-02 박소장 – 서류·교육 관리 복잡`
  - 관련 Quadrant(DOS): Q1 혁신기회 – 법정 자율점검표의 전산화를 통해 핵심 서류·교육 Pain 해결
- **체크리스트 작성/임시저장/제출 및 승인/반려**
  - 관련 Pain/AOS: `P-01 김대리 – 법령·보고 혼잡`, `P-02 박소장 – 서류·교육 관리 복잡`, `P-03 이팀장 – 법적 리스크 부담`
  - 관련 Quadrant(DOS): Q1·Q2 – 반복 보고 피로와 승인 책임·법적 리스크를 동시에 완화하는 중심 기능
- **감독자 및 안전관리자 워크플로우 + 텍스트·사진 기반 조치 기록**
  - 관련 Pain/AOS: `P-03 이팀장 – 법적 리스크 부담`
  - 관련 Quadrant(DOS): Q2 – 리스크 대시보드·조치 추적을 위한 최소 워크플로우
- **기본 AI 위험도 분석**
  - 관련 Pain/AOS: `P-03 이팀장 – 법적 리스크 부담`, (확장) `P-04~P-07`
  - 관련 Quadrant(DOS): Q2·Q3 – 리스크 가시성 향상 및 향후 ESG/예측 분석 확장을 위한 기반
- **“내 할 일”/우선 확인 리스트 중심 알림 UX 및 감사 로그**
  - 관련 Pain/AOS: `P-01`, `P-02`, `P-03`
  - 관련 Quadrant(DOS): Q1·Q2 – 핵심 Pain 관련 이벤트를 사용자 행동으로 연결하고, 책임 추적성을 확보

### 9.2 이번 릴리즈 제외 (차기 범위)

- 모든 자율점검표(전체 28p)의 전 항목 전산화
- 고급 통계 대시보드 및 복잡한 분석 리포트
- 외부 법정보고 자동 생성
- 모바일 앱(네이티브) 출시
- 복잡한 알림 센터(읽음/미읽음 관리, 푸시/메일 완전 연동)
- 고급 LLM/문서 자동 생성 기능(다양한 리포트/인사이트 생성 등)

> **원칙**: “본 SRS에 정의되지 않은 기능은 이번 릴리즈 범위에 포함되지 않는다.”

#### AOS-DOS 관점에서의 제외 근거 (차기 확장 영역)

- **모든 자율점검표 전체 전산화**
  - 관련 Pain/AOS: `P-02`, `P-04~P-07`
  - 사유: 현재 Q1·Q2에서 최소한으로 영향을 주는 3개 작업유형(사다리/고소작업대/밀폐공간)에 집중하고, 나머지 양식은 **2단계 확장**에서 고려
- **고급 통계 대시보드·복잡한 분석 리포트, 외부 법정보고 자동 생성**
  - 관련 Pain/AOS: `P-03`, `P-04`, `P-05`
  - 사유: Q2·Q3에 해당하는 고급 분석·보고 기능으로, MVP 단계에서는 기본 조회·조치 추적에 집중
- **모바일 앱(네이티브), 복잡한 알림 센터, 고급 LLM/문서 자동 생성 기능**
  - 관련 Pain/AOS: 전반적 UX·생산성·ESG/스마트건설 관련 Pain(`P-04~P-07`)
  - 사유: 현재 AOS-DOS 상 Q3(유지/확장) 비중이 높은 영역으로, **웹 기반 MVP 안정화 후** 투자하는 것을 전제로 제외

---

## 부록 A. AOS-DOS 분석 요약

### A.1 핵심 페르소나 및 Pain–Goal 요약

| 페르소나 | 여정 단계       | 주요 Pain                           | Goal(궁극적 목표)                            |
|----------|-----------------|--------------------------------------|----------------------------------------------|
| 박소장   | 관리·보고       | 서류·교육 관리가 수기로 진행, 누락·중복 | 문서 자동화·효율적 보고 시스템 구축         |
| 김대리   | 점검·리포트     | 법령·보고 혼잡으로 리포트 피로 극심   | 자동 보고서 생성 및 일정관리 자동화         |
| 이팀장   | 리스크 관리     | 법적 책임 부담, 실시간 리스크 데이터 부재 | 리스크 대시보드로 예방 중심 관리           |
| 정과장   | 데이터 관리     | 부서별 데이터 중복, 통합 불가         | 통합 안전데이터 관리체계 구축               |
| 최매니저 | ESG·스마트건설  | 솔루션 간 데이터 분절, 표준화 어려움 | ESG 자동 리포트 및 AI 예측 연동             |
| 압둘     | 교육            | 언어 장벽으로 안전수칙 이해 어려움   | 다국어 음성 교육 및 알림 시스템             |
| 김기사   | 현장 작업       | 작은 글씨·복잡한 UI로 조작 불편      | 음성입력·간단 UI로 피로도 관리              |

### A.2 AOS 기준 상위 Pain (혁신기회 후보)

| 순위 | Pain ID | 페르소나 | Pain 요약                 | AOS 점수 | 해석                              |
|------|---------|----------|---------------------------|----------|-----------------------------------|
| 1    | P-01    | 김대리   | 법령·보고 혼잡            | 3.0      | 리포트 자동화 1순위               |
| 1    | P-02    | 박소장   | 서류·교육 관리 복잡       | 3.0      | 현장 문서·교육 관리 핵심 Pain    |
| 3    | P-03    | 이팀장   | 법적 리스크 부담          | 2.0      | 예방형 리스크 관리 솔루션 수요 큼 |

### A.3 DOS 기준 상위 Pain (시장가중치 반영)

| 순위 | Pain ID | 페르소나 | Pain 요약           | DOS 점수 | 해석                                   |
|------|---------|----------|---------------------|----------|----------------------------------------|
| 1    | P-01    | 김대리   | 법령·보고 혼잡      | 2.7      | 대다수 협력사에 공통 Pain (혁신 1순위) |
| 2    | P-02    | 박소장   | 서류관리 복잡       | 2.4      | 문서관리 자동화 수요 높음             |
| 3    | P-03    | 이팀장   | 법적 리스크 부담    | 1.6      | 관리층 중심 확장성 중간               |

### A.4 AOS–DOS 매트릭스 요약

| Quadrant           | 조건                 | 주요 대상           | 전략적 시사점                                       |
|--------------------|----------------------|---------------------|------------------------------------------------------|
| Q1 혁신기회        | High AOS / High DOS | `P-01`, `P-02`      | **MVP 1차 집중 영역** – 리포트·문서 자동화 솔루션   |
| Q2 개선기회        | High AOS / Mid DOS  | `P-03`              | 리스크 관리 대시보드·조치 추적 기능으로 단계적 강화 |
| Q3 유지/확장 기회 | Mid AOS / Low DOS   | `P-04~P-07`         | 데이터 통합·UX 개선·ESG·다국어 등 2단계 확장 영역   |
| Q4 과잉투자        | Low AOS / Low DOS   | (현재 없음)         | 본 MVP에서는 고려하지 않음                          |
